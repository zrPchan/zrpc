:root{
  --bg-1: #fff7fb; /* pale pink */
  --bg-2: #fffcf5; /* pale cream */
  --card: #fffefc;
  --muted: #7b6b7b;
  --accent: #f6a4d9; /* cute pink */
  --accent-2: #ffd3a5; /* peach */
  --accent-3: #b89258; /* original accent */
  --shadow: 0 8px 20px rgba(34,20,35,0.06);
}

body{font-family:'Baloo 2','Inter',system-ui,-apple-system,'Segoe UI',Roboto,Helvetica,Arial; margin:18px; color:#38263a; background: linear-gradient(180deg, var(--bg-1), var(--bg-2));}
.stats .big{font-size:30px;font-weight:700}
.stats .mid{font-size:16px;margin-top:6px;color:var(--muted)}
.stats .small{font-size:13px;color:#8b748a}
.bottle{position:relative;width:160px;height:260px;margin:18px auto;border-radius:28px;overflow:hidden;background:linear-gradient(180deg,#fff9f9,#fffaf6);box-shadow:var(--shadow);border:1px solid rgba(0,0,0,0.04)}
.rim{position:absolute;inset:0;border-radius:28px;pointer-events:none}
.sand{position:absolute;left:8px;right:8px;bottom:8px;height:calc(100% - 16px);overflow:hidden;border-radius:18px}
.sand-layer{position:absolute;left:0;width:100%;box-sizing:border-box;border-top:1px solid rgba(0,0,0,0.03);border-radius:8px}
.sand-layer.partial{border-top:1px solid rgba(0,0,0,0.06)}
.controls{display:flex;gap:12px;justify-content:center;margin-top:12px;flex-wrap:wrap}
.controls button{min-width:84px}

/* base button */
button{padding:10px 14px;border-radius:999px;border:none;background:linear-gradient(180deg,#fff,#fff);box-shadow:0 6px 18px rgba(0,0,0,0.06);cursor:pointer;font-weight:600;transition:transform .12s ease,box-shadow .12s ease}
button:hover{transform:translateY(-2px)}
button:active{transform:translateY(0)}
button:focus{outline:3px solid rgba(246,164,217,0.18);outline-offset:3px}

/* button variants */
.btn-primary, .primary{ background: linear-gradient(180deg,var(--accent),var(--accent-2)); color: #5a2b3a; box-shadow: 0 10px 26px rgba(246,164,217,0.12) }
.btn-outline{ background: transparent; border: 1px solid rgba(59,28,36,0.06); color: #40272f }
.btn-ghost{ background: transparent; color: var(--muted); box-shadow:none }
button[disabled], .btn-disabled{ opacity:0.5; cursor: default; transform:none }
dialog{border:none;border-radius:12px;padding:14px;background:var(--card);box-shadow:0 12px 40px rgba(34,20,35,0.08)}
/* Ensure dialog appears above embedded overlays (reset overlay z-index:80) */
dialog[open], dialog.modal-fallback{position:fixed;z-index:1000;left:50%;top:50%;transform:translate(-50%,-50%);max-width:92%;box-shadow:0 12px 40px rgba(0,0,0,0.35);pointer-events:auto}
label{display:block;margin:6px 0}
.row{display:flex;gap:8px;justify-content:flex-end;margin-top:6px}
.countdown{position:absolute;top:8px;right:12px;font-size:12px;color:#666}
.stat{display:flex;align-items:center;gap:8px}
main{max-width:420px;margin:0 auto;padding:8px}
@media (prefers-reduced-motion: reduce){*{transition:none!important}}

/* Timer display */
.timer{text-align:center;margin-top:6px}
.timer > div:first-child{font-size:18px;font-weight:600}
#timerDisplay{font-size:20px;letter-spacing:1px}

/* Countdown circular UI */
.countdown-ui{text-align:center;margin-top:12px}
.circle-wrap{position:relative;width:160px;height:160px;margin:0 auto}
.countdown-ring{transform:rotate(-90deg);transform-box:fill-box;transform-origin:center}
.ring-bg{stroke:rgba(0,0,0,0.04)}
.ring-fg{stroke:linear-gradient(90deg,var(--accent),var(--accent-2));stroke:#ffb6d9;transition:stroke-dashoffset 0.5s linear}
.circle-center{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.countdown-text{font-size:22px;font-weight:700;font-family:monospace}
.countdown-sub{font-size:12px;color:#666}
.countdown-controls{margin-top:8px;display:flex;gap:8px;justify-content:center}
.countdown-controls button{padding:8px 12px;border-radius:6px;border:1px solid #ccc;background:#fff}

/* disabled button appearance */
button:disabled{opacity:0.5;cursor:not-allowed}

.log-list-outer{border-top:1px solid rgba(0,0,0,0.06);padding:8px}
.log-list{max-height:260px;overflow:auto;padding:0;display:flex;flex-direction:column;gap:12px;margin:0 auto;width:100%;box-sizing:border-box}
.log-item{background:linear-gradient(180deg,#fff,#fffaf3);border-radius:14px;padding:14px;border:1px solid rgba(0,0,0,0.04);box-shadow:0 8px 20px rgba(34,20,35,0.04);font-size:14px}
.log-item{overflow-wrap:anywhere}
.log-meta{display:flex;gap:8px;color:#7b6b7b;font-size:12px;margin-bottom:8px}
.log-layer{font-weight:700;color:var(--accent-3)}
.log-comment{color:#4b3b4b}
.log-empty{color:#888;text-align:center;padding:12px}

.log-empty-text{color:#888}

/* Debug panel */
#debugPanel{padding:8px;max-width:420px;margin:12px auto;border-top:1px solid rgba(0,0,0,0.04)}
#debugPanel .debug-header{display:flex;justify-content:space-between;align-items:center}
#debugPanel .debug-controls{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
#debugPanel .debug-controls button{padding:6px 8px;border-radius:6px;border:1px solid #bbb;background:#fff}
#debugPanel .debug-row{margin-top:8px;display:flex;gap:8px;align-items:center}
#debugPanel input[type=number]{flex:1;padding:6px;border:1px solid #ccc;border-radius:6px}
#enableSEBtn{background:#f3f7ff;border-color:#9fb2ff}
#debugPanel .hint{font-size:12px;color:#666}

/* Overtime alert banner */
#overtimeAlert{display:none;padding:8px;background:#fff4e5;border:1px solid #f0c080;color:#7a4b11;text-align:center;border-radius:6px;margin-bottom:8px;max-width:420px;margin-left:auto;margin-right:auto}
#overtimeAlert button{margin-left:12px;padding:4px 8px;border-radius:6px;border:1px solid rgba(0,0,0,0.06);background:#fff}

/* Desktop: restrict log list width to ~1/3 so scrollbar sits next to cards */
@media (min-width: 900px){
  .log-list{max-width:33%;}
}

/* Truncate warning inside end modal */
.truncate-warning{display:none;margin-top:8px;padding:10px;border-radius:10px;background:#fff8f4;border:1px solid #ffd8c6;color:#7a4b11}
.truncate-warning .actions{display:flex;gap:8px;margin-top:8px;justify-content:flex-end}
.truncate-warning button{padding:6px 8px}

/* character counter next to inputs in modal */
.char-counter{display:inline-block;margin-left:8px;font-size:12px;color:#8b748a;background:#fff2f7;padding:4px 8px;border-radius:999px;border:1px solid rgba(0,0,0,0.03)}
.char-counter.small{font-size:11px;color:#999;padding:2px 4px}

/* Embedded popup overlay for reset confirmation (not native dialog) */
.overlay{position:fixed;inset:0;background:rgba(55,32,45,0.18);align-items:center;justify-content:center;z-index:80;display:none}

/* utility classes moved from inline styles in index.html */
.text-center{ text-align:center }
.mt-8{ margin-top:8px }
.mt-10{ margin-top:10px }
.form-dialog{ max-width:480px; padding:16px }
.actions-right{ text-align:right; margin-top:8px }
.code-inline{ word-break:break-all; max-width:420px; display:inline-block }

/* additional spacing and container utilities used by history/admin pages */
.mt-12{ margin-top:12px }
.mt-16{ margin-top:16px }
.mt-18{ margin-top:18px }
.container-720{ max-width:720px; margin:18px auto }
.muted{ color:#666 }
.text-muted{ color:#444 }
.overlay[aria-hidden="false"]{display:flex}
.popup-box{background:white;border-radius:10px;padding:12px;width:280px;max-width:90%;box-shadow:0 8px 24px rgba(0,0,0,0.2);border:1px solid rgba(0,0,0,0.06);transform-origin:center center;transition:transform 160ms ease,opacity 120ms ease}
.overlay[style*="display:block"] .popup-box, .overlay[style*="display:flex"] .popup-box{transform:scale(1);opacity:1}
.popup-box[hidden]{transform:scale(0.96);opacity:0}
.popup-title{font-weight:700;font-size:16px;color:#111;text-align:center}
.popup-body{text-align:center}
.popup-actions{display:flex;justify-content:center;gap:8px;margin-top:12px}
.popup-actions button:first-child{margin-right:8px}

/* Target time input and buttons */
/* Target time row: center the label, input, button and badge */
.target-row{display:flex;gap:8px;justify-content:center;align-items:center;margin-top:8px}
.target-row label{margin-right:4px}
#targetMinutesInput{width:72px;padding:6px;border:1px solid #ccc;border-radius:6px}
#upgradeBtn{padding:6px 10px;border-radius:6px}
#proBadge{margin-left:8px;font-weight:600;color:#666}

/* Logs header */
#logs h4{text-align:center;margin-top:8px}

/* Truncate warning actions (used in modal) */
.truncate-warning .actions{display:flex;gap:8px;margin-top:8px;justify-content:flex-end}
.btn-primary{background:#b89258;color:white;border-color:#9f7440}
.btn-primary:hover{filter:brightness(0.98)}

/* Mobile debug toast for devices without console access (iPhone) */
#mobileToast{position:fixed;left:50%;bottom:14px;transform:translateX(-50%);background:rgba(0,0,0,0.85);color:white;padding:8px 12px;border-radius:8px;font-size:14px;z-index:3000;display:none;max-width:90%;text-align:center}
.toast-show{display:block;opacity:1;transition:opacity 200ms ease}
.toast-hide{opacity:0;transition:opacity 200ms ease}

/* Update banner shown when a new Service Worker / app version is available */
#updateBanner{position:fixed;left:50%;top:12px;transform:translateX(-50%);background:#0b63ff;color:white;padding:10px 14px;border-radius:8px;z-index:4000;display:none;align-items:center;gap:12px;box-shadow:0 8px 24px rgba(11,99,255,0.14);max-width:92%}
#updateBanner .msg{flex:1;font-size:15px}
#updateBanner .actions{display:flex;gap:8px}
#updateBanner button{padding:6px 10px;border-radius:6px;border:none;background:rgba(255,255,255,0.12);color:white}
#updateBanner button.primary{background:white;color:#0b63ff}

/* Visual flash for save button when tapped to confirm interaction */
.save-flash{box-shadow:0 0 0 3px rgba(184,146,88,0.45);}

/* Small screen adjustments */
@media (max-width:600px){
  body{margin:12px}
  .container-720{max-width:92%;margin:12px auto}
  .bottle{width:130px;height:210px}
  .circle-wrap{width:132px;height:132px}
  .countdown-text{font-size:18px}
  .controls{gap:8px}
  .controls button{min-width:64px;padding:8px 10px;font-size:14px}
  .log-list{gap:10px}
  .log-item{padding:10px}
  .stats .big{font-size:22px}
}

/* Extra small screen / mobile refinements to prevent layout breakage */
@media (max-width:420px){
  /* let main use most of the viewport */
  main{max-width:98%;padding:10px}

  /* make controls wrap and allow flexible buttons so they don't overflow */
  .controls{flex-wrap:wrap;align-items:center}
  .controls button{min-width:0;flex:1 1 auto;margin:6px 4px}

  /* target row: stack on narrow screens */
  .target-row{flex-wrap:wrap;gap:6px;justify-content:center}
  #targetMinutesInput{width:64px}

  /* reduce bottle and circle sizes slightly */
  .bottle{width:120px;height:190px}
  .circle-wrap{width:120px;height:120px}
  .countdown-text{font-size:16px}

  /* reduce top spacing so the important UI is visible without excessive scroll */
  .stats{margin-top:8px}
  .countdown-ui{margin-top:6px}

  /* make logs occupy full width and readable */
  .log-list{max-width:100%;padding:6px}
  .log-item{padding:10px}

  /* ensure dialogs and overlays fit */
  dialog, .popup-box{max-width:94%}
}
